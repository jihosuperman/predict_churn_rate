# 해야할 것들

### 2023-04-06
1. 모델링 환경 구축
2. 멤버쉽 만료일이 멤버쉽 시작일보다 작은 값 어떻게 전처리할지, 기타 아웃라이어, NULL값 어떻게 할지
3. 로그데이터, 거래내역 데이터 어떻게 피쳐로 사용할지 고민
4. 모델링, 테스트 진행(코랩으로 시간 날때 계속 돌려놓을까?)

### 2023-04-07
할 일
1. 모델링 환경 구축
2. 멤버쉽 만료일이 멤버쉽 시작일보다 작은 값 어떻게 전처리할지, 기타 아웃라이어, NULL값 어떻게 할지
3. 로그데이터, 거래내역 데이터 어떻게 피쳐로 사용할지 고민
4. 모델링, 테스트 진행(코랩으로 시간 날때 계속 돌려놓자)

한 일
1. zero-base EDA 테스트
2. log/periods 추가해서 xgb 테스트

### 2023-04-08
할 일
1. 모델링 환경 구축
2. 멤버쉽 만료일이 멤버쉽 시작일보다 작은 값 어떻게 전처리할지, 기타 아웃라이어, NULL값 어떻게 할지
3. 로그데이터, 거래내역 데이터 어떻게 피쳐로 사용할지 고민
4. 모델링, 테스트 진행(코랩으로 시간 날때 계속 돌려놓자)

한일
1. xgb 테스트 완료. 실험 결과(training & test no.1)
    best parameters :  {'learning_rate': 0.01, 'max_depth': 30, 'min_child_weight': 10, 'n_estimators': 300}
    best score :  0.9017702748697204
    accuracy_score : 0.8994063635316658
    precision: 0.7855514133700098
    recall: 0.8791315618924174
    f1 score: 0.8297111837452453
    confusion_matrix : [[18763  5925]
                        [ 2984 21704]]
    
    시간이 거의 15시간 이상 소요되었음.
    이렇게 하면 기간 내에 테스트 횟수가 많이 줄어들 것으로 예상됨.
    앞으로는 10만개정도만 샘플링해서 진행하는 것도 좋을 것 같음.

### 2023-04-09
할 일
1. 모델링 환경 구축
2. 멤버쉽 만료일이 멤버쉽 시작일보다 작은 값 어떻게 전처리할지, 기타 아웃라이어, NULL값 어떻게 할지
3. 로그데이터, 거래내역 데이터 어떻게 피쳐로 사용할지 고민
4. 모델링, 테스트 진행(코랩으로 시간 날때 계속 돌려놓자) ==> 우선순위 catboost xgboost lgboost
5. 스케일링 사용할지
6. 큰 데이터 불러올 수 있도록 모듈 만들기

한 일
1. training & test no.2 완료.
    - training & test no.1과 거의 유사한 환경이지만 일부 파라미터 조정.
        params_xgb_test2 = {
                "max_depth": [20,30,40],
                "min_child_weight" : [9,10,15],
                "n_estimators": [300,500,1000],
                'learning_rate': [0.01]
            }
    - training & test no.1에서 클래스별 데이터 수의 차이가 커 정확도는 90에 가까운 숫자였지만, 정작 이탈에 대한 예측의 정확도는 낮음. 이를 보완하기 위해 언더샘플링.
RandomUnderSampler(sampling_strategy='majority')
4. training & test no.3 완료.
    - training & test no.2의 best_param 사용
    - ['count', 'total_periods', 'active_per_periods'] 데이터만 사용하여 모델링
5. training & test no.4 완료.
    - training & test no.2의 best_param 사용
    - 'bd' feature를 추가하여 모델링
    - no.3 보다는 전체적인 지표에서 개선된 모습을 보임.
    - 그러나 'bd'는 아웃라이어가 너무 많아서 아웃라이어를 조정해서 추가 테스트 필요
6. 팀원들이 유저 로그 데이터가 너무 커 활용하지 못하고 있음을 확인.
    - 팀원들이 사용할 유저로그 데이터 조회 모듈 제작